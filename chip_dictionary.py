chip_dictionary = {
    1: {
        "name": "Cannon",
        "range": ["MatchY"]
    },
    2: {
        "name": "HiCannon",
        "range": ["MatchY"]
    },
    3: {
        "name": "M-Cannon",
        "range": ["MatchY"]
    },
    4: {
        "name": "AirShot1",
        "range": ["MatchY"]
    },
    5: {
        "name": "Vulcan1",
        "range": ["MatchY"],
    },
    6: {
        "name": "Vulcan2",
        "range": ["MatchY"],
    },
    7: {
        "name": "Vulcan3",
        "range": ["MatchY"],
    },
    8: {
        "name": "SuprVulc",
        "range": ["MatchY"],
    },
    9: {
        "name": "Spreader1",
        "range": ["MatchY"],
    },
    10: {
        "name": "Spreader2",
        "range": ["MatchY"],
    },
    11: {
        "name": "Spreader3",
        "range": ["MatchY"],
    },
    12: {
        "name": "TankCan1",
        "range": [
            "MatchY",
            "BackColumn"
        ],
    },
    13: {
        "name": "TankCan2",
        "range": [
            "MatchY",
            "BackColumn"
        ],
    },
    14: {
        "name": "TankCan3",
        "range": [
            "MatchY",
            "BackColumn"
        ],
    },
    15: {
        "name": "GunDelS1",
        "range": ["Pattern"],
        "pattern": [
            ["0", "0", "X"],
            ["P", "0", "X"],
            ["0", "0", "X"],
        ]
    },
    16: {
        "name": "GunDelS2",
        "range": ["Pattern"],
        "pattern": [
            ["0", "0", "X"],
            ["P", "0", "X"],
            ["0", "0", "X"],
        ]
    },
    17: {
        "name": "GunDelS3",
        "range": ["Pattern"],
        "pattern": [
            ["0", "0", "X"],
            ["P", "0", "X"],
            ["0", "0", "X"],
        ]
    },
    18: {
        "name": "GunDelEX*",
        "range": ["Pattern"],
        # Add specific pattern if available
    },
    19: {
        "name": "YoYo",
        "range": ["Pattern"],
        "pattern": [
            ["P", "X", "X", "X"],
        ]
    },
    20: {
        "name": "FireBrn1",
        "range": ["Pattern"],
        "pattern": [
            ["P", "X", "X", "X"],
        ]
    },
    21: {
        "name": "FireBrn2",
        "range": ["Pattern"],
        "pattern": [
            ["P", "X", "X", "X"],
        ]
    },
    22: {
        "name": "FireBrn3",
        "range": ["Pattern"],
        "pattern": [
            ["P", "X", "X", "X"],
        ]
    },
    23: {
        "name": "WideSht",
        "range": ["MatchY"],  # Assuming it affects multiple squares
        # TODO: Define 3-tall pattern
    },
    24: {
        "name": "TrnArrw1",
        "range": ["MatchY"],
        # Incentivize being as far back as possible
    },
    25: {
        "name": "TrnArrw2",
        "range": ["MatchY"],
        # Incentivize being as far back as possible
    },
    26: {
        "name": "TrnArrw3",
        "range": ["MatchY"],
        # Incentivize being as far back as possible
    },
    27: {
        "name": "BblStar1",
        "range": ["MatchY"],
        # Moves in wave pattern
    },
    28: {
        "name": "BblStar2",
        "range": ["MatchY"],
        # Moves in wave pattern
    },
    29: {
        "name": "BblStar3",
        "range": ["MatchY"],
        # Moves in wave pattern
    },
    30: {
        "name": "Thunder",
        "range": ["MatchY"],
        # Slowly tracks player
    },
    31: {
        "name": "DolThdr1",
        "range": ["MatchY"],
    },
    32: {
        "name": "DolThdr2",
        "range": ["MatchY"],
    },
    33: {
        "name": "DolThdr3",
        "range": ["MatchY"],
    },
    34: {
        "name": "ElcPuls1",
        "range": ["Pattern"],
        "pattern": [
            ["0", "0", "X"],
            ["P", "X", "X"],
            ["0", "0", "X"],
        ]
    },
    35: {
        "name": "ElcPuls2",
        "range": ["Pattern"],
        "pattern": [
            ["0", "0", "X"],
            ["P", "X", "X"],
            ["0", "0", "X"],
        ]
    },
    36: {
        "name": "ElcPuls3",
        "range": ["Pattern"],
        "pattern": [
            ["0", "0", "X"],
            ["P", "X", "X"],
            ["0", "0", "X"],
        ]
    },
    # Continue with SId=37 to 202
    37: {
        "name": "RskyHny1",
        "range": ["MatchY"],
    },
    38: {
        "name": "RskyHny2",
        "range": ["MatchY"],
    },
    39: {
        "name": "RskyHny3",
        "range": ["MatchY"],
    },
    40: {
        "name": "RlngLog1",
        "range": ["MatchY"],
    },
    41: {
        "name": "RlngLog2",
        "range": ["MatchY"],
    },
    42: {
        "name": "RlngLog3",
        "range": ["MatchY"],
    },
    43: {
        "name": "MachGun1",
        "range": ["MatchY"],
    },
    44: {
        "name": "MachGun2",
        "range": ["MatchY"],
    },
    45: {
        "name": "MachGun3",
        "range": ["MatchY"],
    },
    46: {
        "name": "HeatDrgn",
        "range": ["MatchY"],
    },
    47: {
        "name": "ElecDrgn",
        "range": ["MatchY"],
    },
    48: {
        "name": "AquaDrgn",
        "range": ["MatchY"],
    },
    49: {
        "name": "WoodDrgn",
        "range": ["MatchY"],
    },
    50: {
        "name": "AirHocky",
        "range": ["MatchY"],
    },
    51: {
        "name": "DrilArm",
        "range": ["MatchY"],
    },
    52: {
        "name": "Tornado",
        "range": ["Pattern"],
        "pattern": [
            ["P", "0", "X"],
        ]
    },
    53: {
        "name": "Static",
        "range": ["Pattern"],
        "pattern": [
            ["P", "0", "X"],
        ]
    },
    54: {
        "name": "MiniBomb",
        "range": ["Pattern"],
        "pattern": [
            ["P", "0", "0", "X"],
        ]
    },
    55: {
        "name": "EnergBom",
        "range": ["Pattern"],
        "pattern": [
            ["P", "0", "0", "X"],
        ]
    },
    56: {
        "name": "MegEnBom",
        "range": ["Pattern"],
        "pattern": [
            ["P", "0", "0", "X"],
        ]
    },
    57: {
        "name": "FlshBom1",
        "range": ["Pattern"],
        "pattern": [
            ["P", "0", "0", "X"],
        ]
    },
    58: {
        "name": "FlshBom2",
        "range": ["Pattern"],
        "pattern": [
            ["P", "0", "0", "X"],
        ]
    },
    59: {
        "name": "FlshBom3",
        "range": ["Pattern"],
        "pattern": [
            ["P", "0", "0", "X"],
        ]
    },
    60: {
        "name": "BlkBomb",
        "range": ["Pattern"],
        "pattern": [
            ["P", "0", "0", "X"],
        ]
    },
    61: {
        "name": "AquaNdl1",
        "range": ["Any"],
    },
    62: {
        "name": "AquaNdl2",
        "range": ["Any"],
    },
    63: {
        "name": "AquaNdl3",
        "range": ["Any"],
    },
    64: {
        "name": "CornSht1",
        "range": ["MatchY"],
    },
    65: {
        "name": "CornSht2",
        "range": ["MatchY"],
    },
    66: {
        "name": "CornSht3",
        "range": ["MatchY"],
    },
    67: {
        "name": "BugBomb",
        "range": ["Pattern"],
        "pattern": [
            ["P", "0", "0", "X"],
        ]
    },
    68: {
        "name": "GrasSeed",
        "range": ["Pattern"],
        "pattern": [
            ["P", "0", "0", "X"],
        ]
    },
    69: {
        "name": "IceSeed",
        "range": ["Pattern"],
        "pattern": [
            ["P", "0", "0", "X"],
        ]
    },
    70: {
        "name": "PoisSeed",
        "range": ["Pattern"],
        "pattern": [
            ["P", "0", "0", "X"],
        ]
    },
    71: {
        "name": "Sword",
        "range": ["Pattern"],
        "pattern": [
            ["P", "X"],
        ]
    },
    72: {
        "name": "WideSwrd",
        "range": ["Pattern"],
        "pattern": [
            ["0", "X"],
            ["P", "X"],
            ["0", "X"],
        ]
    },
    73: {
        "name": "LongSwrd",
        "range": ["Pattern"],
        "pattern": [
            ["P", "X", "X"],
        ]
    },
    74: {
        "name": "WideBlde",
        "range": ["Pattern"],
        "pattern": [
            ["0", "X"],
            ["P", "X"],
            ["0", "X"],
        ]
    },
    75: {
        "name": "LongBlde",
        "range": ["Pattern"],
        "pattern": [
            ["P", "X", "X"],
        ]
    },
    76: {
        "name": "FireSwrd",
        "range": ["Pattern"],
        "pattern": [
            ["0", "X"],
            ["P", "X"],
            ["0", "X"],
        ]
    },
    77: {
        "name": "AquaSwrd",
        "range": ["Pattern"],
        "pattern": [
            ["0", "X"],
            ["P", "X"],
            ["0", "X"],
        ]
    },
    78: {
        "name": "ElecSwrd",
        "range": ["Pattern"],
        "pattern": [
            ["0", "X"],
            ["P", "X"],
            ["0", "X"],
        ]
    },
    79: {
        "name": "BambSwrd",
        "range": ["Pattern"],
        "pattern": [
            ["0", "X"],
            ["P", "X"],
            ["0", "X"],
        ]
    },
    80: {
        "name": "WindRack",
        "range": ["Pattern"],
        "pattern": [
            ["0", "X"],
            ["P", "X"],
            ["0", "X"],
        ]
    },
    81: {
        "name": "StepSwrd",
        "range": ["Pattern"],
        "pattern": [
            ["0", "0","0","X"],
            ["P", "0","0","X"],
            ["0", "0","0","X"],
        ]
    },
    82: {
        "name": "VarSwrd",
        "range": ["Pattern"],
        "pattern": [
            ["P", "X"],
        ]
    },
    83: {
        "name": "NeoVari",
        "range": ["Pattern"],
        "pattern": [
            ["P", "X"],
        ]
    },
    84: {
        "name": "MoonBld",
        "range": ["Pattern"],
        "pattern": [
            ["X", "X", "X"],
            ["X", "P", "X"],
            ["X", "X", "X"],
        ]
    },
    85: {
        "name": "Muramasa",
        "range": ["Pattern"],
        "pattern": [
            ["P", "X", "X"],
        ]
    },
    86: {
        "name": "MchnSwrd",
        "range": ["MatchY"],#todo
    },
    87: {
        "name": "ElemSwrd",
        "range": ["MatchY"],#todo
    },
    88: {
        "name": "AssnSwrd",
        "range": ["MatchY"],#todo
    },
    89: {
        "name": "CrakShot",
        "range": ["MatchY"],
    },
    90: {
        "name": "DublShot",
        "range": ["MatchY"],
    },
    91: {
        "name": "TrplShot",
        "range": ["MatchY"],
    },
    92: {
        "name": "WaveArm1",
        "range": ["Any"],#todo
    },
    93: {
        "name": "WaveArm2",
        "range": ["Any"],#todo
    },
    94: {
        "name": "WaveArm3",
        "range": ["Any"],#todo
    },
    95: {
        "name": "AuraHed1",
        "range": ["Pattern"],
        "pattern": [
            ["P", "X", "X", "X"],
        ]
    },
    96: {
        "name": "AuraHed2",
        "range": ["Pattern"],
        "pattern": [
            ["P", "X", "X", "X"],
        ]
    },
    97: {
        "name": "AuraHed3",
        "range": ["Pattern"],
        "pattern": [
            ["P", "X", "X", "X"],
        ]
    },
    98: {
        "name": "LilBolr1",
        "range": ["Pattern"],
        "pattern": [
            ["0", "0", "X", "X", "X"],
            ["P", "0", "X", "X", "X"],
            ["0", "0", "X", "X", "X"],
        ]
    },
    99: {
        "name": "LilBolr2",
        "range": ["Pattern"],
        "pattern": [
            ["0", "0", "X", "X", "X"],
            ["P", "0", "X", "X", "X"],
            ["0", "0", "X", "X", "X"],
        ]
    },
    100: {
        "name": "LilBolr3",
        "range": ["Pattern"],
        "pattern": [
            ["0", "0", "X", "X", "X"],
            ["P", "0", "X", "X", "X"],
            ["0", "0", "X", "X", "X"],
        ]
    },
    101: {
        "name": "SandWrm1",
        "range": ["Any"],#behind player
    },
    102: {
        "name": "SandWrm2",
        "range": ["Any"],#behind player
    },
    103: {
        "name": "SandWrm3",
        "range": ["Any"],#behind player
    },
    104: {
        "name": "AirRaid1",
        "range": ["Any"],#todo placement
    },
    105: {
        "name": "AirRaid2",
        "range": ["Any"],#todo placement
    },
    106: {
        "name": "AirRaid3",
        "range": ["Any"],#todo placement
    },
    107: {
        "name": "FireHit1",
        "range": ["Any"],#todo max 3 squares x away
    },
    108: {
        "name": "FireHit2",
        "range": ["Any"],#todo max 3 squares x away
    },
    109: {
        "name": "FireHit3",
        "range": ["Any"],#todo max 3 squares x away
    },
    110: {
        "name": "BurnSqr1",
        "range": ["Any"],#todo make sure enemy on ground
    },
    111: {
        "name": "BurnSqr2",
        "range": ["Any"],#todo make sure enemy on ground
    },
    112: {
        "name": "BurnSqr3",
        "range": ["Any"],#todo make sure enemy on ground
    },
    113: {
        "name": "Sensor1",
        "range": ["Any"],#todo object placement
    },
    114: {
        "name": "Sensor2",
        "range": ["Any"],#todo object placement
    },
    115: {
        "name": "Sensor3",
        "range": ["Any"],#todo object placement
    },
    116: {
        "name": "Boomer",
        "range": ["Pattern"],
        "pattern": [
         ["X","X","X","X","X","X"]  ,
         ["0","0","0","0","0","X"]  ,
         ["X","X","X","X","X","X"]  ,
        ]
    },
    117: {
        "name": "HiBoomer",
        "range": ["Pattern"],
        "pattern": [
         ["X","X","X","X","X","X"]  ,
         ["0","0","0","0","0","X"]  ,
         ["X","X","X","X","X","X"]  ,
        ]
    },
    118: {
        "name": "M-Boomer",
        "range": ["Pattern"],
        "pattern": [
         ["X","X","X","X","X","X"]  ,
         ["0","0","0","0","0","X"]  ,
         ["X","X","X","X","X","X"]  ,
        ]
    },
    119: {
        "name": "Lance",
        "range": ["BackColumn"],
    },
    120: {
        "name": "GolmHit1",
        "range": ["Pattern"],
        "pattern": [
            ["0", "X"],
            ["P", "X"],
            ["0", "X"],
        ]
    },
    121: {
        "name": "GolmHit2",
        "range": ["Pattern"],
        "pattern": [
            ["0", "X"],
            ["P", "X"],
            ["0", "X"],
        ]
    },
    122: {
        "name": "GolmHit3",
        "range": ["Pattern"],
        "pattern": [
            ["0", "X"],
            ["P", "X"],
            ["0", "X"],
        ]
    },
    123: {
        "name": "IronShl1",
        "range": ["MatchY"],
    },
    124: {
        "name": "IronShl2",
        "range": ["MatchY"],
    },
    125: {
        "name": "IronShl3",
        "range": ["MatchY"],
    },
    126: {
        "name": "AirSpin1",
        "range": ["MatchY"],#slides until hits a crack, then hits 9 around where it stops
    },
    127: {
        "name": "AirSpin2",
        "range": ["MatchY"],#slides until hits a crack, then hits 9 around where it stops
    },
    128: {
        "name": "AirSpin3",
        "range": ["MatchY"],#slides until hits a crack, then hits 9 around where it stops
    },
    129: {
        "name": "Wind",
        "range": ["Any"],#todo object placement
    },
    130: {
        "name": "Fan",
        "range": ["Any"],#todo object placement
    },
    131: {
        "name": "Rflectr1",
        "range": ["Any"],#todo, use when seeing an attack coming
    },
    132: {
        "name": "Rflectr2",
        "range": ["Any"],#todo, use when seeing an attack coming
    },
    133: {
        "name": "Rflectr3",
        "range": ["Any"],#todo, use when seeing an attack coming
    },
    134: {
        "name": "Snake",
        "range": ["Any"],#todo, use when have lots of cracked holes
    },
    135: {
        "name": "SumnBlk1",
        "range": ["Any"],#todo, only can use when staninding next to a cracked hole
    },
    136: {
        "name": "SumnBlk2",
        "range": ["Any"],#todo, only can use when staninding next to a cracked hole
    },
    137: {
        "name": "SumnBlk3",
        "range": ["Any"],#todo, only can use when staninding next to a cracked hole
    },
    138: {
        "name": "NumbrBl",
        "range": ["MatchY"],
    },
    139: {
        "name": "Meteors",
        "range": ["Any"],
    },
    140: {
        "name": "JustcOne",
        "range": ["Pattern"],
        "pattern": [
         ["0","0","0","X","X","X"]  ,
         ["0","0","0","X","X","X"]  ,
         ["0","0","0","X","X","X"]  ,
        ]
    },
    141: {
        "name": "Magnum",
        "range": ["Any"],#requires addition button press
    },
    142: {
        "name": "CircGun",
        "range": ["Any"],#requires addition button press
    },
    143: {
        "name": "RockCube",
        "range": ["Any"],#todo requies object placement
    },
    144: {
        "name": "TimeBom1",
        "range": ["Any"],
    },
    145: {
        "name": "Mine",
        "range": ["Any"],
    },
    146: {
        "name": "Fanfare",
        "range": ["Any"],
    },
    147: {
        "name": "Discord",
        "range": ["Any"],
    },
    148: {
        "name": "Timpani",
        "range": ["Any"],
    },
    149: {
        "name": "Silence",
        "range": ["Any"],
    },
    150: {
        "name": "VDoll",
        "range": ["Pattern"],
        "pattern": [
            ["P", "0", "0", "X"],#throws doll here, but don't want it to actually hit the enemy
        ]
    },
    151: {
        "name": "Guardian",
        "range": ["Any"],#todo object
    },
    152: {
        "name": "Anubis",
        "range": ["Any"],#todo object, try placing on last column if possible
    },
    153: {
        "name": "Otenko*",
        "range": ["Any"],
    },
    154: {
        "name": "Recov10",
        "range": ["Any"],
    },
    155: {
        "name": "Recov30",
        "range": ["Any"],
    },
    156: {
        "name": "Recov50",
        "range": ["Any"],
    },
    157: {
        "name": "Recov80",
        "range": ["Any"],
    },
    158: {
        "name": "Recov120",
        "range": ["Any"],
    },
    159: {
        "name": "Recov150",
        "range": ["Any"],
    },
    160: {
        "name": "Recov200",
        "range": ["Any"],
    },
    161: {
        "name": "Recov300",
        "range": ["Any"],
    },
    162: {
        "name": "PanlGrab",
        "range": ["Any"],
    },
    163: {
        "name": "AreaGrab",
        "range": ["Any"],
    },
    164: {
        "name": "GrabBnsh",
        "range": ["Any"],
    },
    165: {
        "name": "GrabRvng",
        "range": ["Any"],
    },
    166: {
        "name": "PnlRetrn",
        "range": ["Any"],
    },
    167: {
        "name": "Geddon",
        "range": ["Any"],
    },
    168: {
        "name": "HolyPanl",
        "range": ["Any"],
    },
    169: {
        "name": "Snctuary",
        "range": ["Any"],
    },
    170: {
        "name": "ComingRd",
        "range": ["Any"],
    },
    171: {
        "name": "GoingRd",
        "range": ["Any"],
    },
    172: {
        "name": "SloGauge",
        "range": ["Any"],
    },
    173: {
        "name": "FstGauge",
        "range": ["Any"],
    },
    174: {
        "name": "FullCust",
        "range": ["Any"],
    },
    175: {
        "name": "BusterUp",
        "range": ["Any"],
    },
    176: {
        "name": "BugFix",
        "range": ["Any"],
    },
    177: {
        "name": "Invisibl",
        "range": ["Any"],
    },
    178: {
        "name": "Barrier",
        "range": ["Any"],
    },
    179: {
        "name": "Barr100",
        "range": ["Any"],
    },
    180: {
        "name": "Barr200",
        "range": ["Any"],
    },
    181: {
        "name": "BblWrap",
        "range": ["Any"],
    },
    182: {
        "name": "LifeAur",
        "range": ["Any"],
    },
    183: {
        "name": "MagCoil",
        "range": ["Any"],
    },
    184: {
        "name": "WhiCapsl",
        "range": ["Any"],
    },
    185: {
        "name": "Uninstll",
        "range": ["Any"],
    },
    186: {
        "name": "AntiNavi",
        "range": ["Any"],
    },
    187: {
        "name": "AntiDmg",
        "range": ["Any"],
    },
    188: {
        "name": "AntiSwrd",
        "range": ["Any"],
    },
    189: {
        "name": "AntiRecv",
        "range": ["Any"],
    },
    190: {
        "name": "CopyDmg",
        "range": ["Any"],
    },
    191: {
        "name": "LifeSync",
        "range": ["Any"],
    },
    192: {
        "name": "Atk+10",
        "range": ["Any"],
    },
    193: {
        "name": "Navi+20",
        "range": ["Any"],
    },
    194: {
        "name": "ColorPt",
        "range": ["Any"],
    },
    195: {
        "name": "Atk+30",
        "range": ["Any"],
    },
    196: {
        "name": "DblPoint",
        "range": ["Any"],
    },
    197: {
        "name": "ElemTrap",
        "range": ["Any"],
    },
    198: {
        "name": "ColArmy",
        "range": ["Any"],
    },
    199: {
        "name": "BlzrdBal",
        "range": ["Any"],
    },
    200: {
        "name": "TimeBom2",
        "range": ["Any"],
    },
    201: {
        "name": "TimeBom3",
        "range": ["Any"],
    },
    202: {
        "name": "BigBomb",
        "range": ["Pattern"],
        "pattern": [
            ["0", "0","X","X","X"],
            ["P", "0","X","X","X"],
            ["0", "0","X","X","X"],
        ]
    },
    
    221: {'name': 'Roll', 'range': ['Any']}, 
    222: {'name': 'Roll2', 'range': ['Any']}, 
    223: {'name': 'Roll3', 'range': ['Any']}, 
    224: {'name': 'ProtoMan', 'range': ['Any']}, 
    225: {'name': 'ProtoMnEX', 'range': ['Any']}, 
    226: {'name': 'ProtoMnSP', 'range': ['Any']}, 
    227: {'name': 'HeatMan', 'range': ['Pattern'],
        "pattern": [
            ["0", "0","X","X"],
            ["P", "X","X","X"],
            ["0", "0","X","X"],
        ]}, 
    228: {'name': 'HeatManEX', 'range': ['Pattern'],
        "pattern": [
            ["0", "0","X","X"],
            ["P", "X","X","X"],
            ["0", "0","X","X"],
        ]}, 
    229: {'name': 'HeatManSP', 'range': ['Pattern'],
        "pattern": [
            ["0", "0","X","X"],
            ["P", "X","X","X"],
            ["0", "0","X","X"],
        ]}, 
    230: {'name': 'ElecMan', 'range': ['Any']}, #todo, near obstable
    231: {'name': 'ElecManEX', 'range': ['Any']}, #todo, near obstable
    232: {'name': 'ElecManSP', 'range': ['Any']}, #todo, near obstable
    
    233: {'name': 'SlashMan', 'range': ['Any']}, #todo, stand in back row
    234: {'name': 'SlashMnEX', 'range': ['Any']},  #todo, stand in back row
    235: {'name': 'SlashMnSP', 'range': ['Any']},  #todo, stand in back row
    236: {'name': 'EraseMan', 'range': ['Pattern', "MatchY"],
        "pattern": [
            ["0", "0","X"],
            ["0", "X","0"],
            ["P", "0","0"],
            ["0", "X","X"],
            ["0", "0","X"],
        ]}, 
    237: {'name': 'EraseMnEX', 'range': ['Pattern', "MatchY"],
        "pattern": [
            ["0", "0","X"],
            ["0", "X","0"],
            ["P", "0","0"],
            ["0", "X","X"],
            ["0", "0","X"],
        ]}, 
    238: {'name': 'EraseMnSP', 'range':['Pattern', "MatchY"],
        "pattern": [
            ["0", "0","X"],
            ["0", "X","0"],
            ["P", "0","0"],
            ["0", "X","X"],
            ["0", "0","X"],
        ]}, 
    239: {'name': 'ChrgeMan', 'range': ['MatchY']}, #encourage being forward
    240: {'name': 'ChrgeMnEX', 'range': ['MatchY']}, #encourage being forward
    241: {'name': 'ChrgeMnSP', 'range': ['MatchY']}, #encourage being forward
    242: {'name': 'AquaMan', 'range': ['BackColumn']}, 
    243: {'name': 'AquaMnEX', 'range': ['BackColumn']}, 
    244: {'name': 'AquaMnSP', 'range': ['BackColumn']}, 
    245: {'name': 'TmhkMan', 'range': ['Pattern'],
        "pattern": [
            ["0", "X","X"],
            ["P", "X","X"],
            ["0", "X","X"],
        ]}, 
    246: {'name': 'TmhkManEX', 'range': ['Pattern'],
        "pattern": [
            ["0", "X","X"],
            ["P", "X","X"],
            ["0", "X","X"],
        ]}, 
    247: {'name': 'TmhkManSP', 'range': ['Pattern'],
        "pattern": [
            ["0", "X","X"],
            ["P", "X","X"],
            ["0", "X","X"],
        ]}, 
    248: {'name': 'TenguMan', 'range': ['Pattern'],
          "pattern":[
            ["0","0","X","X","0","0"]  ,
            ["0","0","X","X","X","0"]  ,
            ["X","X","X","X","X","X"]  ,      
        ]}, 
    249: {'name': 'TenguMnEX', 'range': ['Pattern'],
          "pattern":[
            ["0","0","X","X","0","0"]  ,
            ["0","0","X","X","X","0"]  ,
            ["X","X","X","X","X","X"]  ,      
        ]}, 
    250: {'name': 'TenguMnSP', 'range': ['Pattern'],
          "pattern":[
            ["0","0","X","X","0","0"]  ,
            ["0","0","X","X","X","0"]  ,
            ["X","X","X","X","X","X"]  ,      
        ]},  
    251: {'name': 'GrndMan', 'range': ['Any']}, #damages either forward or any
    252: {'name': 'GrndManEX', 'range': ['Any']}, #damages either forward or any
    253: {'name': 'GrndManSP', 'range': ['Any']}, #damages either forward or any
    254: {'name': 'DustMan', 'range': ['Any']}, #not even sure what this does
    255: {'name': 'DustManEX', 'range': ['Any']},
    256: {'name': 'DustManSP', 'range': ['Any']},
    
    257: {'name': 'BlastMan', 'range': ['Any']},#todo: wide shot range 
    258: {'name': 'BlastMnEX', 'range': ['Any']}, 
    259: {'name': 'BlastMnSP', 'range': ['Any']}, 
    250: {'name': 'DiveMan', 'range': ['Pattern'],#think this requires front for
        "pattern": [
            ["0", "X","X"],
            ["P", "X","X"],
            ["0", "X","X"],
        ]},  
    261: {'name': 'DiveManEX', 'range': ['Pattern'],
        "pattern": [
            ["0", "X","X"],
            ["P", "X","X"],
            ["0", "X","X"],
        ]},  
    262: {'name': 'DiveManSP', 'range': ['Pattern'],
        "pattern": [
            ["0", "X","X"],
            ["P", "X","X"],
            ["0", "X","X"],
        ]}, 
    263: {'name': 'CrcusMan', 'range': ['Pattern'],
        "pattern": [
            ["P", "0","0","X"],
        ]}, 
    264: {'name': 'CrcusMnEX', 'range': ['Pattern'],
        "pattern": [
            ["P", "0","0","X"],
        ]},  
    265: {'name': 'CrcusMnSP', 'range': ['Pattern'],
        "pattern": [
            ["P", "0","0","X"],
        ]}, 
    
    266: {'name': 'JudgeMan', 'range': ['Pattern'],
        "pattern": [
            ["P", "X","X","X"],
        ]}, 
    267: {'name': 'JudgeMnEX', 'range': ['Pattern'],
        "pattern": [
            ["P", "X","X","X"],
        ]},  
    268: {'name': 'JudgeMnSP', 'range': ['Pattern'],
        "pattern": [
            ["P", "X","X","X"],
        ]}, 
    269: {'name': 'ElmntMan', 'range': ['Any']}, #will require model for hitting button
    260: {'name': 'ElmntMnEX', 'range': ['Any']}, 
    271: {'name': 'ElmntMnSP', 'range': ['Any']}, 
    272: {'name': 'Colonel', 'range': ['Pattern'],#not sure about this pattern
        "pattern": [
            ["0", "0","X","X","X"],
            ["P", "0","0","X","0"],
            ["0", "0","X","X","X"],
        ]},  
    273: {'name': 'ColonelEX', 'range': ['Pattern'],#not sure about this pattern
        "pattern": [
            ["0", "0","X","X","X"],
            ["P", "0","0","X","0"],
            ["0", "0","X","X","X"],
        ]},  
    274: {'name': 'ColonelSP', 'range': ['Pattern'],#not sure about this pattern
        "pattern": [
            ["0", "0","X","X","X"],
            ["P", "0","0","X","0"],
            ["0", "0","X","X","X"],
        ]},  
    275: {'name': 'Count*', 'range': ['Any']}, #idk
    276: {'name': 'CountEX*', 'range': ['Any']}, #idk
    277: {'name': 'CountSP*', 'range': ['Any']}, #idk
    278: {'name': 'Django*', 'range': ['Any']}, #idk
    279: {'name': 'Django2*', 'range': ['Any']}, #idk
    270: {'name': 'Django3*', 'range': ['Any']}, #idk
    
    300: {'name': 'Bass', 'range': ['Any']},
    301: {'name': 'BigHook', 'range': ['Pattern'],
        "pattern": [
            ["0", "0","0","X","X","X"],
            ["0", "0","0","X","X","X"],
            ["0", "0","0","X","X","X"],
        ]},   
    302: {'name': 'DeltaRay', 'range': ['Any']}, 
    303: {'name': 'ColForce', 'range': ['Any']}, 
    304: {'name': 'BugRSwrd', 'range': ['Any']}, 
    311: {'name': 'Gregar*', 'range': ['Any']}, 
    305: {'name': 'BassAnly', 'range': ['Pattern'],
          "pattern": [
            ["P", "X"],#not the actual requirement, but hardcore
        ]},  
    306: {'name': 'MetrKnuk', 'range': ['Any']}, #try to minimize adjacent tiles to player
    307: {'name': 'CrossDiv', 'range': ['MatchY']}, 
    308: {'name': 'HubBatc', 'range': ['Any']}, 
    309: {'name': 'BgDthThd', 'range': ['Any']}, 
    310: {'name': 'DblBeast*', 'range': ['Any']}, 
    311: {'name': 'Gregar*', 'range': ['Any']},
    312: {'name': 'Falzar*', 'range': ['Any']}
}


form_charges = {
    0:{
        "name": "Normal",
        "range": ["MatchY"],
    },
    1:{
        "name": "Fire",
        "range": ["Pattern"],
        "pattern": [
            ["P", "X","X","X"],
        ]
    },
    2:{
        "name": "Elec",
        "range": ["MatchY"],
    },
    3:{
        "name": "Slash",
        "range": ["Pattern"],
        "pattern": [
            ["0", "X","X"],
            ["P", "X","X"],
            ["0", "X","X"],
        ]
    },
    4:{
        "name": "Erase",
        "range": ["MatchY"],
    },
    5:{
        "name": "Charge",
        "range": ["Pattern"],
        "pattern": [
            ["P", "X","X","X"],
        ]
    },
    6:{
        "name": "Aqua",
        "range": ["MatchY"],
    },
    7:{
        "name": "Thawk",
        "range": ["Pattern"],
        "pattern": [
            ["0", "X","X"],
            ["P", "X","X"],
            ["0", "X","X"],
        ]
    },
    8:{
        "name": "Tengu",
        "range": ["Pattern"],
        "pattern": [
            ["0", "X"],
            ["P", "X"],
            ["0", "X"],
        ]
    },
    9:{
        "name": "Grnd",
        "range": ["MatchY"],
    },
    10:{
        "name": "Dust",
        "range": ["MatchY"],
    },
    11:{
        "name": "Beast",
        "range": ["Any"],
    },
    12:{
        "name": "Beast",
        "range": ["Any"],
    },
    13:{
        "name": "FireBeast",
        "range": ["Pattern"],
        "pattern": [
            ["0", "0","X","X"],
            ["P", "X","X","X"],
            ["0", "0","X","X"],
        ]
    },
    14:{
        "name": "ElecBeast",
        "range": ["Pattern"],
        "pattern": [
            ["0", "0","X","X"],
            ["P", "X","X","X"],
            ["0", "0","X","X"],
        ]
    },
    15:{
        "name": "SlashBeast",
        "range": ["Pattern"],
        "pattern": [
            ["0", "X","0","X"],
            ["P", "0","X","0"],
            ["0", "X","0","X"],
        ]
    },
    16:{
        "name": "EraseBeast",
        "range": ["Any"],
    },
    17:{
        "name": "ChargeBeast",
        "range": ["MatchY"],
    },
    19:{
        "name": "ThawkBeast",
        "range": ["Pattern"],
        "pattern": [
            ["X","X","X","X","X","X"]  ,
            ["0","0","0","0","0","X"]  ,
            ["X","X","X","X","X","X"]  ,
        ]
    },
    20:{
        "name": "TenguBeast",
        "range": ["Pattern"],
        "pattern": [
            ["0", "0","0","X"],
            ["P", "X","X","X"],
            ["0", "0","0","X"],
        ]
    },
    21:{
        "name": "GrndBeast",
        "range": ["MatchY"],
    },
    22:{
        "name": "DustBeast",
        "range": ["Any"],
    }        
}


#todo: cant use navi chips on holes


from chips import get_chip_damage, mega_chips, giga_chips


def get_form_damage_for_position(tensor_params, player=True):
    player_form = tensor_params['player_emotion_state']
    enemy_form = tensor_params['enemy_emotion_state']
    
    form = form_charges.get(player_form) if player else form_charges.get(enemy_form)
    
    if not form:
        # Invalid form ID
        # print(f"Invalid {'player' if player else 'enemy'}_form: {player_form if player else enemy_form}")
        return 0
    
    return get_attack_damage(tensor_params, form, player, is_form=True, attack_id=player_form if player else enemy_form)


def get_damage_for_position(tensor_params, player=True, active_chip=False):
    player_chip = tensor_params['player_chip']
    enemy_chip = tensor_params['enemy_chip'] if not active_chip else tensor_params['enemy_active_chip']

    # Select the appropriate chip based on the player flag
    chip = chip_dictionary.get(player_chip) if player else chip_dictionary.get(enemy_chip)
    
    if not chip:
        # Invalid chip ID
        # print(f"Invalid {'player' if player else 'enemy'}_chip: {player_chip if player else enemy_chip}")
        return 0
    
    return get_attack_damage(tensor_params, chip, player,is_form=False, attack_id = player_chip if player else enemy_chip)



def get_attack_damage(tensor_params, chip, player=True, is_form=False, attack_id=None):
    
    player_position = tensor_params['player_grid_position']  # (x, y)
    enemy_position = tensor_params['enemy_grid_position']    # (x, y)
    range_types = chip.get('range', [])
    if not is_form:
        # print(chip)
        damage = get_chip_damage(attack_id)
    else:
        damage = 100
    if damage is None:
        return 0

    # Iterate through each range type to determine if enemy is in range
    for range_type in range_types:
        if range_type == "MatchY":
            if player_position[1] == enemy_position[1]:
                return damage  # Enemy is in the same Y row
            
        elif range_type == "Any":
            return damage

        elif range_type == "BackColumn":
            # Assuming columns are 1-indexed and 6 is the back column for player
            if (enemy_position[0] == 6 and player) or (enemy_position[0] == 1 and not player):
                return damage  # Enemy is in the back column

        elif range_type == "Pattern":
            pattern = chip.get('pattern', [])
            has_P = any('P' in row for row in pattern)
            
            if has_P:
                if not player:
                    # Flip the pattern horizontally for enemy perspective
                    pattern = [row[::-1] for row in pattern]
                    # Swap positions
                    player_pos, enemy_pos = enemy_position, player_position
                else:
                    player_pos, enemy_pos = player_position, enemy_position

                if not pattern:
                    print(f"No pattern defined for chip {chip['name']}")
                    continue

                # Locate 'P' in the pattern
                p_found = False
                for dy, row in enumerate(pattern):
                    for dx, cell in enumerate(row):
                        if cell == 'P':
                            p_pattern_x = dx
                            p_pattern_y = dy
                            p_found = True
                            break
                    if p_found:
                        break

                if not p_found:
                    print(f"No 'P' found in pattern for chip {chip['name']}")
                    continue

                # Calculate offsets for all 'X's relative to 'P'
                x_offsets = []
                for dy, row in enumerate(pattern):
                    for dx, cell in enumerate(row):
                        if cell == 'X':
                            offset_x = dx - p_pattern_x
                            offset_y = dy - p_pattern_y
                            x_offsets.append((offset_x, offset_y))

                # Player's grid position
                player_x, player_y = player_pos

                # Check if enemy is within any 'X' position in the pattern
                for offset_x, offset_y in x_offsets:
                    target_x = player_x + offset_x
                    target_y = player_y + offset_y

                    # Ensure target position is within grid boundaries (1-6 x 1-3)
                    if 1 <= target_x <= 6 and 1 <= target_y <= 3:
                        if [target_x, target_y] == enemy_pos:
                            return damage  # Enemy is within the pattern range

            else:
                # Pattern is absolute; it should be a 6x3 grid
                if len(pattern) != 3 or any(len(row) != 6 for row in pattern):
                    print(f"Invalid absolute pattern size for chip {chip['name']}. Expected 6x3.")
                    continue

                # Map pattern directly to grid positions
                # pattern[y][x] corresponds to grid (x+1, y+1)
                for y, row in enumerate(pattern):
                    for x, cell in enumerate(row):
                        if cell == 'X':
                            target_x = x + 1  # Grid columns 1-6
                            target_y = y + 1  # Grid rows 1-3
                            if [target_x, target_y] == enemy_position:
                                return damage  # Enemy is within the absolute pattern range

    return 0  # Enemy not in range



def get_confidence_for_position(tensor_params, player=True):
    player_position = tensor_params['player_grid_position']  # (x, y)
    enemy_position = tensor_params['enemy_grid_position']    # (x, y)
    
    
    player_chip = tensor_params['player_chip']
    enemy_chip = tensor_params['enemy_active_chip']

    chip = chip_dictionary.get(player_chip) if player else chip_dictionary.get(enemy_chip)
    
    if not chip:
        # print(f"Invalid player_chip: {player_chip}")
        return 0

    range_types = chip.get('range', [])

    # Initialize confidence
    confidence = 1

    # Check each range type
    for range_type in range_types:
        if range_type == "MatchY":
            if player_position[1] == enemy_position[1]:
                confidence = max(confidence, 100)
                if confidence == 100:
                    return confidence

        elif range_type == "BackColumn":
            if enemy_position[0] == 6 and player or enemy_position[0] == 1 and not player:
                confidence = max(confidence, 100)
                if confidence == 100:
                    return confidence

        elif range_type == "Pattern":
            pattern = chip.get('pattern', [])
            if not player:
                #flip x axis
                pattern = [row[::-1] for row in pattern]
                #swap player and enemy positions
                player_position, enemy_position = enemy_position, player_position
            if not pattern:
                print(f"No pattern defined for chip {chip['name']}")
                continue

            # Find the position of 'P' in the pattern
            p_found = False
            for dy, row in enumerate(pattern):
                for dx, cell in enumerate(row):
                    if cell == 'P':
                        p_pattern_x = dx
                        p_pattern_y = dy
                        p_found = True
                        break
                if p_found:
                    break

            if not p_found:
                print(f"No 'P' found in pattern for chip {chip['name']}")
                continue

            # Calculate the offsets of all 'X's relative to 'P'
            x_offsets = []
            for dy, row in enumerate(pattern):
                for dx, cell in enumerate(row):
                    if cell == 'X':
                        offset_x = dx - p_pattern_x
                        offset_y = dy - p_pattern_y
                        x_offsets.append((offset_x, offset_y))

            # Get player's grid position
            player_x, player_y = player_position
            
            # print(f"Player Position: ({player_x}, {player_y})")

            # Check each 'X' position in the pattern
            for offset_x, offset_y in x_offsets:
                target_x = player_x + offset_x
                target_y = player_y + offset_y

                # Debugging Statements
                # print(f"Offset: ({offset_x}, {offset_y})")
                # print(f"Target Position: ({target_x}, {target_y})")
                # print(f"Enemy Position: {enemy_position}")

                # Ensure the target position is within grid boundaries
                if 1 <= target_x <= 6 and 1 <= target_y <= 3:
                    if [target_x, target_y] == enemy_position:
                        confidence = max(confidence, 100)
                        print(f"Enemy matched at position ({target_x}, {target_y}). Confidence set to {confidence}.")
                        if confidence == 100:
                            return confidence
                # else:
                #     print(f"Target position ({target_x}, {target_y}) is out of bounds.")

    return confidence  # Return the highest confidence found (0 or 100)
